{
  "collectionMethod": "batchscript",
  "datapoints": [
    {
      "max": "",
      "triggerInterval": 0,
      "dataType": 7,
      "maxDigits": 4,
      "interpretMethod": "namevalue",
      "interpretExpr": "##WILDVALUE##.hardwareVersion",
      "type": "gauge",
      "clearInterval": 0,
      "originId": "qaNnrWdNQMuhGbfV00GpAA",
      "useValue": "output",
      "min": "",
      "name": "hardwareVersion",
      "noData": "Do not trigger an alert"
    },
    {
      "max": "",
      "triggerInterval": 0,
      "dataType": 7,
      "maxDigits": 4,
      "interpretMethod": "namevalue",
      "interpretExpr": "##WILDVALUE##.memoryMB",
      "type": "gauge",
      "clearInterval": 0,
      "originId": "Z9tVVHAmR7GEbZhiGBb_QQ",
      "useValue": "output",
      "min": "",
      "name": "memoryMB",
      "noData": "Do not trigger an alert"
    },
    {
      "max": "",
      "triggerInterval": 0,
      "dataType": 7,
      "maxDigits": 4,
      "interpretMethod": "namevalue",
      "interpretExpr": "##WILDVALUE##.numberOfCpus",
      "type": "gauge",
      "clearInterval": 0,
      "originId": "XTyxXuUNQWqluYfuaMq5xw",
      "useValue": "output",
      "min": "",
      "name": "numberOfCpus",
      "noData": "Do not trigger an alert"
    },
    {
      "max": "",
      "triggerInterval": 0,
      "dataType": 7,
      "maxDigits": 4,
      "interpretMethod": "namevalue",
      "interpretExpr": "##WILDVALUE##.pvdcHighestSupportedHardwareVersion",
      "type": "gauge",
      "clearInterval": 0,
      "originId": "D9TuVbt9QpmE93u-0QLQAA",
      "useValue": "output",
      "min": "",
      "name": "pvdcHighestSupportedHardwareVersion",
      "noData": "Do not trigger an alert"
    },
    {
      "max": "",
      "triggerInterval": 0,
      "dataType": 7,
      "maxDigits": 4,
      "interpretMethod": "namevalue",
      "interpretExpr": "##WILDVALUE##.vmToolsVersion",
      "type": "gauge",
      "clearInterval": 0,
      "originId": "gd7HVQaXQLmD1IYAE6Y5Hw",
      "useValue": "output",
      "min": "",
      "name": "vmToolsVersion",
      "noData": "Do not trigger an alert"
    }
  ],
  "searchKeywords": "",
  "displayedAs": "vCloud :: VMs",
  "description": "",
  "appliesTo": "hasCategory(\"vCloud\") && REST.user",
  "activeDiscovery": {
    "groupExpr": "auto.vcloud.vdcname",
    "deleteInactiveInstances": false,
    "groupMethod": "ilp",
    "discoveryMethod": "ad_script",
    "autoDeleteInstances": false,
    "disableDiscoveredInstances": false,
    "filters": [],
    "params": {
      "type": "groovy",
      "content": "import com.santaba.agent.groovyapi.http.*;\nimport javax.xml.parsers.*;\nimport com.santaba.agent.util.script.ScriptCache\n\ndef host = hostProps.get(\"system.hostname\");\ndef user = hostProps.get(\"rest.user\");\ndef pass = hostProps.get(\"rest.pass\");\n\ndef cache = ScriptCache.getCache()\ndef key = \"vCloudAuth.ClientSecret\"\ndef token = cache.get(key)\n\nconn = \"https://${host}/api/query?type=adminVM&amp;format=records&pageSize=128\".toURL().openConnection();\n\nconn.setRequestMethod(\"GET\");\nconn.setRequestProperty(\"x-vcloud-authorization\", \"${token}\");\nconn.setRequestProperty(\"Accept\", \"application/*;version=37.0\");\n\nif(conn.responseCode == 200)\n{\n\ttext = conn.content.text.readLines().tail().join('')\n\t//println(text);\n\n\tdef queryResultRecords = new XmlSlurper().parseText(text)\n\n\tqueryResultRecords.AdminVMRecord.each { record ->\n\t    def propertyMap = record.attributes()\n\t    def joinedProperties = propertyMap.collect { propName, propValue -> \"auto.vCloud.${propName}=${propValue}\" }.join(\"&\")\n\t    println \"${record.@vmNameInVc}##${record.@name}##${record.@containerName}####${joinedProperties}\";\n\t}\n}\nelse\n{\n\tprintln(\"${conn.responseCode}: ${conn.responseMessage}\");\n}\n\nreturn 0;"
    },
    "discoveryInterval": "0m",
    "enabled": true,
    "showDeletedInstanceDays": 0
  },
  "collectionAttrs": {
    "type": "groovy",
    "content": "import com.santaba.agent.groovyapi.http.*;\nimport javax.xml.parsers.*;\nimport com.santaba.agent.util.script.ScriptCache\n\ndef host = hostProps.get(\"system.hostname\");\ndef user = hostProps.get(\"rest.user\");\ndef pass = hostProps.get(\"rest.pass\");\n\ndef cache = ScriptCache.getCache()\ndef key = \"vCloudAuth.ClientSecret\"\ndef token = cache.get(key)\n\nconn = \"https://${host}/api/query?type=adminVM&amp;format=records&pageSize=128\".toURL().openConnection();\n\nconn.setRequestMethod(\"GET\");\nconn.setRequestProperty(\"x-vcloud-authorization\", \"${token}\");\nconn.setRequestProperty(\"Accept\", \"application/*;version=37.0\");\n\nif(conn.responseCode == 200)\n{\n\ttext = conn.content.text.readLines().tail().join('')\n\t//println(text);\n\n\tdef queryResultRecords = new XmlSlurper().parseText(text)\n\n\tqueryResultRecords.AdminVMRecord.each { record ->\n\t    def propertyMap = record.attributes()\n\t    propertyMap.each { propName, propValue ->\n\t        if(propValue.isNumber()){\n                println \"${record.@vmNameInVc}.${propName}=${propValue}\"\n\t        }\n        }\n\t}\n}\nelse\n{\n\tprintln(\"${conn.responseCode}: ${conn.responseMessage}\");\n}\n\nreturn 0;"
  },
  "type": 0,
  "technicalNotes": "",
  "useWildValueAsUniqueIdentifier": false,
  "version": 1723149506,
  "registryMetadata": {
    "currentUuid": "sFiWZHXaS2SrXalaPxUc1g",
    "originalUuid": "sFiWZHXaS2SrXalaPxUc1g",
    "locatorId": "",
    "authorCompanyUuid": "043d42a3-246c-436f-8500-de1e9f7979e8",
    "registryVersion": "1.0.0",
    "checksum": "0fae649b77af89c45de0b9d889ebb08f",
    "namespace": "",
    "registryId": ""
  },
  "multiInstance": true,
  "integrationMetadata": {
    "publishedAtMS": 1724096142760,
    "authorCompanyUuid": "043d42a3-246c-436f-8500-de1e9f7979e8",
    "namespace": "nextdimension",
    "registryVersion": "1.0.0",
    "name": "",
    "checksum": "0fae649b77af89c45de0b9d889ebb08f",
    "registryId": "aca21a31-4431-45d0-988f-c965ffed3cf1",
    "isPrivate": false,
    "locator": "LFMGKJ",
    "lineageId": "sFiWZHXaS2SrXalaPxUc1g",
    "status": "SECURITY_REVIEW"
  },
  "name": "vCloudDirector_VMs",
  "collectionInterval": "5m",
  "dataSourceType": 1,
  "group": "vCloud Director",
  "headers": {
    "cache-control": "no-cache, no-store",
    "content-disposition": "attachment; filename=\"vCloudDirector_VMs.json\"",
    "content-encoding": "gzip",
    "content-type": "application/json",
    "date": "Wed, 25 Sep 2024 12:48:08 GMT",
    "server": "LM",
    "strict-transport-security": "max-age=31536000; includeSubDomains",
    "vary": "accept-encoding",
    "x-content-type-options": "nosniff",
    "x-server-version": "210-8"
  }
}